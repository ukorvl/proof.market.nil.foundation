System.register(["./index-legacy-fcc85aa1.js","./index-legacy-34df035b.js"],(function(e,r){"use strict";var a,t,s,i,d,l,n,c,o,h,u,m,g,p,y,v,b,O,S,k,D,N,x,f,T,E,w,j,C,P,U,I,L,B,M,V,_,q,A,F,$,R;return{setters:[e=>{a=e.a3,t=e.a4,s=e.a5,i=e.a6,d=e.a7,l=e.a8,n=e.a9,c=e.r,o=e.aa,h=e.j,u=e.ab,m=e.c,g=e.ac,p=e.ad,y=e.ae,v=e.af,b=e.d,O=e.F,S=e.ag,k=e.ah,D=e.ai,N=e.aj,x=e.ak,f=e.al,T=e.am,E=e.an,w=e.ao,j=e.T,C=e.ap,P=e.aq,U=e.ar,I=e.as,L=e.Q,B=e.W,M=e.V,V=e.X,_=e.i,q=e.L,A=e.at},e=>{F=e.a,$=e.b,R=e.S}],execute:function(){const r={.001:"0.001",.01:"0.01",.1:"0.1",1:"1"},z=({createdOn:e,matched_time:r,cost:a,eval_time:t,_key:s,status:i},d)=>({init_time:e,timestamp:r,cost:a,eval_time:t,type:d,orderId:s,status:i}),H=({children:e})=>{const[r,a]=c.useState(!1),[t,s]=c.useState();return h(u.Provider,{value:{processing:r,setProcessing:a,selectedValues:t,setSelectedValues:s},children:e})},K=({disabled:e})=>{const t=m(),{displayUserOrders:s,setDisplayUserOrders:i}=c.useContext(g),{isReadonly:d}=p(),l=a(y),n=c.useCallback((e=>{t(v(e))}),[t]);return b(O,{children:[b("div",{className:S.checkboxContainer,children:[h("input",{id:"toggleDisplayUserOrders",type:"checkbox",className:S.checkbox,checked:s,onChange:()=>i(!s),disabled:d}),h("label",{className:S.label,htmlFor:"toggleDisplayUserOrders",children:"Show my orders"})]}),b(k,{children:[h(k.Button,{className:S.changePriceStepButton,disabled:e,children:l}),h(k.Menu,{align:"right",children:Object.keys(r).sort().map((e=>h(k.Item,{onSelect:()=>n(e),active:e===l,children:h("span",{children:e})},e)))})]})]})},Q=()=>{const[e,r]=D("displayUserOrdersInOrderbook",!0),t=a(N,i),s=a(x,i),d=a((e=>e.orderBookState.isLoading)),l=a((e=>e.orderBookState.hasApiError));return h(f,{children:b(g.Provider,{value:{displayUserOrders:e,setDisplayUserOrders:r},children:[b("div",{className:S.header,children:[h("h4",{children:"Order book"}),h(K,{disabled:d})]}),h("div",{className:S.orderBook,children:W({data:t,isLoading:d,isError:l,lastOrderData:s})})]})})},W=({data:e,isLoading:r,isError:a,lastOrderData:t})=>{const{proposals:s,requests:i}=e;switch(!0){case r&&!s.length&&!i.length:return h(w,{grow:!0});case a:return h("h5",{children:"Error while loading data."});case!!s.length||!!i.length:return b(O,{children:[h(T,{type:"requests",data:i}),h("div",{className:S.lastDeal,children:t&&b(O,{children:[h("div",{className:S.lastDealTitle,children:"Last deal:"}),t.cost&&h("div",{className:`${t.type}TextColor`,children:`${t.cost.toFixed(4)} ${E}`})]})}),h(T,{type:"proposals",data:s})]});default:return h("h5",{children:"No orders."})}};var X=(e=>(e.active="ACTIVE",e.history="HISTORY",e))(X||{});const Y=({currentTab:e,onSetTab:r})=>h(j,{justified:!0,className:C.nav,children:Object.values(X).map((a=>h(j.Item,{onClick:()=>r(a),active:a===e,children:a},a)))}),G=()=>{const[e,r]=c.useState(X.active),u=a((e=>e.statementsState.selectedKey)),{isError:m,loadingData:g,activeOrdersData:p,historyOrdersData:y}=(()=>{const e=a((e=>e.userOrdersState.isLoading)),r=t(s,i),h=t(d,i),u=t(l,i),m=t(n,i);return{loadingData:e,isError:a((e=>e.userOrdersState.isError)),activeOrdersData:c.useMemo((()=>[...u.map((e=>z(e,o.sell))),...r.map((e=>z(e,o.buy)))]),[u,r]),historyOrdersData:c.useMemo((()=>[...m.map((e=>z(e,o.sell))),...h.map((e=>z(e,o.buy)))]),[m,h])}})();return b(f,{children:[h("h4",{children:"Manage orders"}),h("div",{className:C.manageOrdersPanel,"data-sb":"manageOrdersPanel",children:b(P,{overlayTitle:"Authorization is required to manage orders",children:[h(Y,{currentTab:e,onSetTab:r}),void 0!==u?J(e,m,g,e===X.active?p:y):h("h5",{children:"Please, select statement to display orders."})]})})]})},J=(e,r,a,t)=>{if(r)return h("h5",{children:"Error while loading data."});if(0===t.length)return a?h(w,{grow:!0}):h("h5",{children:"No orders."});switch(e){case X.active:return h(I,{data:t});case X.history:return h(U,{data:t});default:return h(O,{})}};e("default",(()=>b(L,{as:"main",fluid:!0,"data-sb":"mainView",children:[h(B,{children:h("title",{children:"Market"})}),b(M,{children:[b(V,{xs:12,md:3,children:[h(F,{}),h(_,{}),h(q,{})]}),b(H,{children:[b(V,{xs:12,md:6,children:[h($,{}),h(R,{}),h(Q,{})]}),b(V,{xs:12,md:3,children:[h(A,{}),h(G,{})]})]})]})]})))}}}));
