import{r,b as j,aB as z,aC as P,aD as T,aE as G,d as a,j as e,aF as W,aG as s,aH as u,aI as o,aJ as i,au as m,aK as y,aL as p,aM as E,ao as $,aN as B,aO as D,P as O,F as V,W as q}from"./index-0d04c63d.js";import{A as H}from"./AuthCard-b5d77778.js";const J=()=>{const h=r.useRef(null),c=r.useRef(null),{state:n}=j(),S=z(n==null?void 0:n.from),[g,f]=r.useState(),[l,v]=r.useState("password"),I=l==="password"?"fa-eye-slash":"fa-eye",M=()=>v(l==="password"?"text":"password"),{register:w,formState:{isSubmitting:N,isValid:C,errors:b},handleSubmit:F}=P({mode:"onChange"}),k=F(async t=>{f("");try{const{jwt:d}=await T(t);await S(d)}catch(d){const L=await G(d);let x="Login error";L&&(x+=`: ${L}`),f(x)}});r.useEffect(()=>{c.current&&c.current.focus()},[]);const{ref:R,...A}=w("username",{required:!0});return a(H,{children:[e(W,{source:"/logo512x384.png",alt:"=nil; Foundation logo",responsive:!0,rounded:!0,className:s.logoImage}),a(u,{children:[e(u.Group,{hasError:!!b.username,children:a(o,{size:i.lg,className:s.control,children:[e(o.Addon,{children:e(m,{iconName:"fa-solid fa-user",className:s.icon})}),e(y,{type:"text",id:"userName",placeholder:"username","aria-label":"username",...A,ref:t=>{R(t),c.current=t}})]})}),e(u.Group,{hasError:!!b.password,children:a(o,{size:i.lg,className:s.control,children:[e(o.Addon,{children:e(m,{iconName:"fa-solid fa-lock",className:s.icon})}),e(y,{type:l,id:"password","aria-label":"password",placeholder:"password",autoComplete:"off",...w("password")}),e(o.Buttons,{children:e(p,{onClick:M,children:e(m,{iconName:`fa-solid ${I}`,className:s.icon})})})]})}),e("div",{children:a(p,{variant:E.success,size:i.lg,onClick:k,disabled:!C||N,block:!0,children:["Login",N&&e($,{})]})}),e("div",{className:s.errorMsg,children:e(B,{in:!!g,timeout:300,nodeRef:h,unmountOnExit:!0,classNames:"fade",children:e("span",{ref:h,className:"errorMessage",children:g})})}),e("h5",{className:"text-muted text-center",children:"Don't have an account? "}),e(D,{to:O.register,state:n,children:e(p,{block:!0,variant:E.success,size:i.lg,"data-sb":"submitLogin",children:"Sign up"})})]})]})},U=()=>a(V,{children:[e(q,{children:e("title",{children:"Login"})}),e(J,{})]});export{U as default};
