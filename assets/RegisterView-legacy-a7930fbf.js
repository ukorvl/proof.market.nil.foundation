System.register(["./index-legacy-fcc85aa1.js","./AuthCard-legacy-e4aa592d.js"],(function(e,s){"use strict";var a,r,t,n,i,c,l,o,d,u,h,m,f,g,p,N,w,y,R,v,x,b,S,k,E,C,M,A;return{setters:[e=>{a=e.r,r=e.b,t=e.aQ,n=e.aC,i=e.aR,c=e.aS,l=e.aM,o=e.P,d=e.aE,u=e.aT,h=e.j,m=e.d,f=e.aH,g=e.aU,p=e.aI,N=e.aJ,w=e.au,y=e.aK,R=e.aN,v=e.aL,x=e.ao,b=e.aV,S=e.aW,k=e.aO,E=e.aX,C=e.F,M=e.W},e=>{A=e.A}],execute:function(){const s=()=>{const[e,s]=a.useState(),[C,M]=a.useState(!0),{state:L}=r(),[q,z]=a.useState("password"),O="password"===q?"fa-eye-slash":"fa-eye",$=a.useRef(null),j=a.useRef(null),W=a.useRef(null),B=a.useRef(null),F=t(),{handleSubmit:G,watch:H,register:J,formState:{isSubmitting:P,errors:T,isValid:U,dirtyFields:V}}=n({mode:"onChange"}),D=G((async e=>{s("");try{await i(e),c?.create({title:"Registration success",message:`Successfully register new user ${e.user}`,variant:l.success}),F(o.login,{state:L})}catch(a){const e=await d(a);let r="Register error";e&&(r+=`: ${e}`),s(r)}}));a.useEffect((()=>{B.current&&B.current.focus()}),[]);const{ref:I,...K}=J("user",{required:!0,minLength:3,maxLength:30}),Q=a.useMemo((()=>!!V.user),[V.user]),X=a.useMemo((()=>!!V.passwd),[V.passwd]),Y=a.useRef(u((async e=>{if(e)try{await E(e),M(!1)}catch(s){404===s?.response?.status&&M(!0)}}),180)).current,Z=H("user");return a.useEffect((()=>{Y(Z)}),[Z,Y]),h(A,{children:m(f,{className:g.form,children:[m("div",{children:[h("h4",{className:g.title,children:"Welcome to Proof Market!"}),h("div",{className:`${g.heading} text-muted`,children:"Create new account"}),m(f.Group,{hasError:!!T.user||!C,children:[m(p,{size:N.lg,className:g.control,children:[h(p.Addon,{children:h(w,{iconName:"fa-solid fa-user",className:g.icon})}),h(y,{type:"text",id:"userName",placeholder:"username","aria-label":"username",ref:e=>{I(e),B.current=e},...K})]}),!C&&h(f.Hint,{children:"Username should be unique"})]}),h(R,{classNames:"fade",timeout:300,in:Q,unmountOnExit:!0,nodeRef:$,children:h("div",{ref:$,children:h(f.Group,{hasError:!!T.passwd,children:m(p,{size:N.lg,className:g.control,children:[h(p.Addon,{children:h(w,{iconName:"fa-solid fa-lock",className:g.icon})}),h(y,{type:q,id:"password",placeholder:"password","aria-label":"password",autoComplete:"off",...J("passwd",{required:!0,maxLength:30})}),h(p.Buttons,{children:h(v,{onClick:()=>z("password"===q?"text":"password"),children:h(w,{iconName:`fa-solid ${O}`,className:g.icon})})})]})})})}),h(R,{classNames:"fade",timeout:300,in:X,unmountOnExit:!0,nodeRef:j,children:h("div",{ref:j,children:m(v,{block:!0,variant:l.success,size:N.lg,disabled:P||!U||!C,onClick:D,children:["Register",P&&h(x,{})]})})}),h("div",{className:g.errorMsg,children:h(R,{in:!!e,timeout:300,nodeRef:W,unmountOnExit:!0,classNames:"fade",children:h("span",{ref:W,className:"errorMessage",children:e})})})]}),m("div",{className:g.bottomBlock,children:[m("div",{className:g.social,children:[h("h5",{className:g.title,children:"Join our Discord's proof-market channel/Telegram for questions/to stay updated"}),h(b,{socialLinks:S})]}),h("h5",{className:"text-center text-muted",children:"Already have an account? "}),h(k,{to:o.login,state:L,children:h(v,{block:!0,variant:l.success,size:N.lg,children:"Sign in"})})]})]})})};e("default",(()=>m(C,{children:[h(M,{children:h("title",{children:"Register"})}),h(s,{})]})))}}}));
